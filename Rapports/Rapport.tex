\documentclass{report}
\usepackage{MCC}

\def\footauthor{Thomas COUCHOUD \& Victor COLEAU}
\title{Analyse d'images}
\author{Thomas COUCHOUD\\\texttt{thomas.couchoud@etu.univ-tours.fr}\\Victor COLEAU\\\texttt{victor.coleau@etu.univ-tours.fr}}

\rowcolors{1}{white}{white}
\begin{document}
	\mccTitle[no]
	\tableofcontents

	\chapter{TP1}
		\section{Question 1}
			\begin{easylist}[itemize]
				& \cbo{Image} permet de gérer les caractéristiques propres à l'image en cours (type d'encodage, luminosité, contraste, ...).
				& \cbo{Process} permet d'appliquer des opérations sur l'image telles qu'ajouter du bruit, des ombres, ...
				& \cbo{Analyze} permet d'acquérir des informations sur l'image dans son état actuel (surface, min/max de couleurs, histogramme, ...).
				& \cbo{Plugins} permet d'utiliser des plugins. Certains sont déjà fournis de base.
			\end{easylist}
			
			Afin de convertir une image en niveaux de gris nous utilisons le menu \cbo{Image > Type} puis avons le choix entre:
			
			\begin{easylist}[itemize]
				& 8 bit: Il y aura 256 niveaux de gris.
				& 16 bit: Il y aura 65536 niveaux de gris.
				& 32 bit: Il y aura 4294967296 niveaux de gris.
			\end{easylist}
			
			Ces valeurs ont un impact sur la manière dont est stockée l'image. Plus on utilise de bits, plus la taille en mémoire de l'image est importante.
			
			\begin{important}
				Dans la suite de ce TP, nous utiliserons le niveau de gris 8-bit.
			\end{important}
			
		\section{Question 2}
			\subsection{Zone 1}
				Nous pouvons observer dans la zone 1 un pic très important. Celui-ci s'explique par une forte présence de couleurs sombres dans l'image originelle transformées en gris sombre (a.k.a. noir). Ces pixels noirs ont une valeur comprise entre $3$ et $28$.
				
			\subsection{Zone 2}
				\`A l'inverse, l'image originelle contient très peu de pixels clairs. Cela est traduit par très peu ($\approx 250$) de gris pixels clairs (a.k.a. blancs).
				
		\section{Question 3}
			\subsection{mystere.pgm}
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/mystereHistoAv.PNG}{Histogramme avant}{0.8}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/mystereHistoAp.PNG}{Histogramme après}{0.8}
						\end{minipage}
						\caption{Histogrammes}
					\end{framed}
				\end{figure}
				
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/mystereAv.PNG}{Image avant}{0.9}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/mystereAp.PNG}{Image après}{0.9}
						\end{minipage}
						\caption{Images}
					\end{framed}
				\end{figure}
				
			\subsection{mer.png⁄}
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/merHistoAv.PNG}{Histogramme avant}{0.8}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/merHistoAp.PNG}{Histogramme après}{0.8}
						\end{minipage}
						\caption{Histogrammes}
					\end{framed}
				\end{figure}
				
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/merAv.PNG}{Image avant}{0.25}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP1/merAp.PNG}{Image après}{0.25}
						\end{minipage}
						\caption{Images}
					\end{framed}
				\end{figure}
				
		\section{Question 4}
			L'image \cbo{soleil} est celle ayant le plus changé car elle est à l'origine extrêmement sombre (très peu de contraste, c'est à dire très peu de niveaux de gris utilisés). L'égalisation du contraste fait donc beaucoup varier la couleur des pixels qui étaient à l'origine très proches.
			
		\section{Question 5}
			Les trois filtres rendent l'image floue. A cette étape, la taille du filtre n'influence que le niveau de flou (très ou peu flou). Cela permet de lisser l'image ainsi que de réduire son bruit.
			
		\section{Question 6}
			Un filtre moyenneur devrait en toute logique remplir l'image d'une couleur étant la moyenne de toutes les couleurs de l'image. 
			
			Cependant après test, nous observons un histogramme qui contient un pic centré à la couleur moyenne (mais d'autres valeurs sont présentes autour de ce pic).
			
		\section{Question 7}
			 \begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.33\textwidth}
							\img{TP1/lisaConv0.PNG}{Image avant}{0.45}
						\end{minipage}
						\begin{minipage}{0.33\textwidth}
							\img{TP1/lisaConv1.PNG}{Image après 1 convolution}{0.45}
						\end{minipage}
						\begin{minipage}{0.33\textwidth}
							\img{TP1/lisaConv2.PNG}{Image après 2 convolutions}{0.45}
						\end{minipage}
						\caption{Images et convolution}
					\end{framed}
				\end{figure}
			 
			 Ce masque de convolution efface les détails présents dans l'image et réduit le bruit, et par conséquence la rend légèrement floue.
			 
		\section{Question 8}
			\img{TP1/lisaConvTP0.PNG}{Profile sur la droite avant}{0.7}
			\begin{figure}[H]
				\begin{framed}
					\begin{minipage}{0.33\textwidth}
						\img{TP1/lisaConvT0.PNG}{Image avant}{0.45}
					\end{minipage}
					\begin{minipage}{0.33\textwidth}
						\img{TP1/lisaConvT1.PNG}{Image après 1 convolution}{0.45}
					\end{minipage}
					\begin{minipage}{0.33\textwidth}
						\img{TP1/lisaConvT2.PNG}{Image après 2 convolutions}{0.45}
					\end{minipage}
					\caption{Images et convolution}
				\end{framed}
			\end{figure}
			\img{TP1/lisaConvTP2.PNG}{Profile sur la droite après}{1.1}
			
			On remarque que le diagramme est moins en dents de scie. Cela montre que le bruit a été atténué. De plus la courbe a des variations moins brutales et moins oscillantes. Cela traduit le lissage.
			
		\section{Question 10}
			Le point faible est que toute l'image devient floue alors que seules les parties bruitées "devraient" être affectées. De plus ce flou implique une perte de détails et de contraste.
			
	\chapter{TP2}
		\section{Question 1}
			\subsection{Détection des contours}
				Nous avons choisit les images \cbo{zebre.jpg} et \cbo{cellules.png}. Le filtre en question applique des traits blancs sur les zones de contour. Sur les images choisies, nous remarquons que les rayures du zèbre et la membrane des cellules sont en blanc car ce sont de fortes zones de contour. A l'inverse l'intérieur/extérieur des cellules est entièrement noir car ce ne sont pas des zones de contour.
				
			\subsection{Deriche}
				Les étapes de Deriche sont:
				\begin{easylist}
					& Applique un filtre pour lisser l'image
					& Calcule des gradients
					& Applique une suppression non-maximale pour éviter les fausses détections de contour.
					& Détecte les bordures avec 2 valeurs bornes.	
				\end{easylist}

			
				Ce filtre nous sort deux images résultat:
				\begin{easylist}[itemize]
					& La première est parfaitement nette. On y voit toute l'image en noir ainsi que les contours en blanc.
					& La deuxième est similaire à la première à la différence que l'algorithme anti-bruit la rend floue.	
				\end{easylist}

				Nous avons testé le filtre Deriche sur les 3 images suivantes:
				\begin{easylist}[itemize]
					& aqui.jpg : L'image d'origine est extrêmement sombre bien que l'on discerne tout de même des contours plus clairs. L'algorithme est donc très efficace car même si l'\oe il humain a du mal à distinguer les contours, les zones sont clairement distinctes en termes de couleurs. Voir \autoref{AquiTP2}.
					& noise.jpg : Cette image est extrêmement bruitée. Bien que reconnaissant les contours de deux formes, l'algorithme considère aussi tous les "points bruit" et affiche donc un ensemble de contours qui ne devrait pas être reconnu. Voir \autoref{NoiseTP2}.
					& delphin.jpg : Cette image n'est composée que de points, l'algorithme ne peut donc pas y reconnaitre de contours. Les résultats obtenus sont donc quasiment entièrement noirs. Voir \autoref{DelphinTP2}.
				\end{easylist}
				
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/aqui1.png}{Aqui avant}{0.8}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/aqui2.png}{Aqui après}{0.8}
						\end{minipage}
						\label{AquiTP2}
						\caption{Aqui}
					\end{framed}
				\end{figure}
				
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/noise1.png}{Noise avant}{0.8}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/noise2.png}{Noise après}{0.8}
						\end{minipage}
						\label{NoiseTP2}
						\caption{Noise}
					\end{framed}
				\end{figure}
				
				\begin{figure}[H]
					\begin{framed}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/delphin1.png}{Delphin avant}{0.8}
						\end{minipage}
						\begin{minipage}{0.49\textwidth}
							\img{TP2/delphin2.png}{Delphin après}{0.8}
						\end{minipage}
						\label{DelphinTP2}
					\caption{Delphin}
					\end{framed}
				\end{figure}

		\section{Question 2}
			\subsection{jeu1 \& jeu2}
				Afin de mettre en évidence les différences entre les images, il faut appliquer l'opération XOR sur celles-ci. En effet cette opération permet de ne garder que les pixels étant strictement différents.
			
			\subsection{jeu3}
				Dans le fichier jeu3, on voit qu'une colonne de pixels blancs est présente tout à gauche de l'image, cela fausserai donc les calculs. Afin d'y remédier, nous proposons l'algorithme suivant: on commence par parcourir verticalement l'image. Toute colonne ne contenant que des pixels blancs sera éliminée, l'image sera donc décalée d'un pixel vers la gauche. Une fois que toutes les colonnes blanches ont étés supprimées, nous pouvons appliquer le XOR de l'opération précédente.
		
		\section{Question 3}
			\subsection{Zèbre horizontal}
				Afin de ne faire apparaitre que les traits horizontaux de l'image zèbre.jpg, nous utilisons le masque de convolution suivant: $\left( \begin{array}{c}1\\0\\-1\end{array}\right)$.
				
				En effet, ce filtre le prend en compte que les pixels au dessus et en dessous du pixel courant. Dans le cas ou ceux-ci sont de même couleur, les valeurs après passage dans le masque s'annulent, on voit donc du noir. Si ceux-ci sont différents (bordure horizontale), les valeurs ne s'annulent pas ce qui se traduit pas un pixel blanc.
				
				\img{TP2/zebreh.png}{Zèbre horizontal}{1}

			\subsection{Suzan vertical}
				Afin de ne faire apparaitre que les traits verticaux de l'image suzan.jpg, nous utilisons le masque de convolution suivant: $\left( \begin{array}{ccccc}-1&1&0&1&-1\end{array}\right)$.
				
				En effet, ce filtre le prend en compte que les pixels à gauche et à droite du pixel courant. Ce dernier est un mélange du filtre précédent mais détecte les bordure des deux cotés (transition blanc $\rightarrow$ noir et noir $\rightarrow$ blanc). En effet le filtre précédent ne détectait que la transition blanc $\rightarrow$ noir car lors de la transition noir $\rightarrow$ blanc la valeur obtenue était de -255 qui est arrondie à 0 (donc aucune détection).
				
				\img{TP2/suzanv.png}{Suzan vertical}{1}
				
		\section{Question 4}
			Après binarisation et analyse, nous trouvons bien 329 cellules.

		\section{Question 5}
			Afin d'obtenir un résultat $\approx 370$ nous pouvons réaliser les étapes suivantes:
			\begin{easylist}
				& Erode
				& Open
				& Erode
				& Open
				& Erode
				& Open
			\end{easylist}
			
			\img{TP2/cell370.png}{Cell 370}{0.6}
			
			De manière plus logique, nous pouvons réaliser les étapes suivantes:
			\begin{easylist}
				& Fill holes
				& Watershed
				& Erode
				& Open
				& Erode
				& Open
				& Erode
				& Open
			\end{easylist}
			
			Cependant, nous arrivons à 415 particules. Mais on remarque par exemple que l'ancienne 246 a été éclatée en plusieurs cellules.
			
			\img{TP2/cell415.png}{Cell 415}{0.6}
			
\end{document}